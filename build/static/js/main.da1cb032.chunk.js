(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,a,t){e.exports={"add-car":"AddCar_add-car__22KBP","new-add-car":"AddCar_new-add-car__3dphz","add-car-form":"AddCar_add-car-form__29hoP","add-button":"AddCar_add-button__2edol",control:"AddCar_control__27Wdl",input:"AddCar_input__2aMkM",actions:"AddCar_actions__23U7Y"}},,function(e,a,t){e.exports={"new-service":"NewService_new-service__1QUB2","service-form":"NewService_service-form__1IyIy","service-date-box":"NewService_service-date-box__Z3JO5",control:"NewService_control__1SXbh",actions:"NewService_actions__gmLC1"}},,,,,,,,,function(e,a,t){e.exports={"car-services":"CarServices_car-services__3m8lP","car-services-box":"CarServices_car-services-box__eYiE0","car-services-list":"CarServices_car-services-list__pM0NX","button-add":"CarServices_button-add__1kmdn"}},function(e,a,t){e.exports={login:"Login_login__1FFeP",actions:"Login_actions__1duyZ"}},function(e,a,t){},function(e,a,t){e.exports={registration:"AddUser_registration__1sxFf",actions:"AddUser_actions__2p2nZ"}},function(e,a,t){e.exports={control:"Input_control__2mM2Y",invalid:"Input_invalid__1uq90"}},function(e,a,t){e.exports={background:"Img_background__30V_8","background-img":"Img_background-img__29Atb"}},function(e,a,t){e.exports={"background-img":"Home_background-img__suMB7"}},function(e,a,t){e.exports={"cars-list":"Cars_cars-list__2VKlO",active:"Cars_active__1PgmH","car-info":"Cars_car-info__9JBR-"}},,,,function(e,a,t){e.exports={card:"Card_card__3sK0-"}},function(e,a,t){e.exports={button:"Button_button__1M8_7"}},,function(e,a,t){e.exports=t.p+"static/media/formula.e8447ff3.jfif"},function(e,a,t){e.exports={"car-info-list":"CarInfo_car-info-list__177wB"}},function(e,a,t){e.exports={background:"Garage_background__1qm21"}},function(e,a,t){e.exports=t.p+"static/media/Awesome-garage.c6ae908c.jfif"},function(e,a,t){e.exports={nav:"Navigation_nav__JXA6M"}},function(e,a,t){e.exports={header:"Header_header__11xEb"}},,function(e,a,t){e.exports=t(69)},,,,,function(e,a,t){},,,,,,,,,,,,,,,,,,,,,,function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),l=t(31),r=t.n(l),i=(t(47),t(4)),s=t(32),u=t.n(s),o=function(e){return c.a.createElement("div",{className:"".concat(u.a.card," ").concat(e.className)},e.children)},d=t(22),m=t.n(d),v=t(33),b=t.n(v),f=function(e){return c.a.createElement("button",{type:e.type||"button",className:"".concat(b.a.button," ").concat(e.className),onClick:e.onClick,disabled:e.disabled},e.children)},g=c.a.createContext({isLoggedIn:!1,onLogout:function(){},onLogin:function(e,a){}}),E=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),o=u[0],d=u[1];Object(n.useEffect)(function(){"1"===localStorage.getItem("isLoggedIn")&&r(!0)},[]);return c.a.createElement(g.Provider,{value:{isLoggedIn:l,isLogin:o,onLogout:function(){localStorage.removeItem("isLoggedIn"),r(!1),d(!1)},onLogin:function(){localStorage.setItem("isLoggedIn","1"),r(!0)},loginBtn:function(){d(!0)}}},e.children)},_=g,p=t(25),j=t.n(p),N=c.a.forwardRef(function(e,a){return c.a.createElement("div",{className:"".concat(j.a.control," ").concat(e.className," ").concat(!1===e.isValid?j.a.invalid:"")},c.a.createElement("label",{htmlFor:e.id},e.label),c.a.createElement("input",{ref:a,type:e.type,id:e.id,value:e.value,onChange:e.onChange||void 0,onBlur:e.onBlur}))}),O=function(e,a){return"USER_INPUT"===a.type?{value:a.val,isValid:a.val.includes("@")}:"INPUT_BLUR"===a.type?{value:e.value,isValid:e.value.includes("@")}:{value:"",isValid:!1}},I=function(e,a){return"USER_INPUT"===a.type?{value:a.val,isValid:a.val.trim().length>6}:"INPUT_BLUR"===a.type?{value:e.value,isValid:e.value.trim().length>6}:{value:"",isValid:!1}},y=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useReducer)(O,{value:"",isValid:null}),u=Object(i.a)(s,2),d=u[0],v=u[1],b=Object(n.useReducer)(I,{value:"",isValid:null}),g=Object(i.a)(b,2),E=g[0],p=g[1],j=Object(n.useContext)(_),y=d.isValid,C=E.isValid;Object(n.useEffect)(function(){var e=setTimeout(function(){r(y&&C)},500);return function(){clearTimeout(e)}},[y,C]);return c.a.createElement(o,{className:m.a.login},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),j.onLogin(d.value,E.value)}},c.a.createElement(N,{id:"email",label:"E-Mail",type:"email",isValid:y,value:d.value,onChange:function(e){v({type:"USER_INPUT",val:e.target.value})},onBlur:function(){v({type:"INPUT_BLUR"})}}),c.a.createElement(N,{id:"password",label:"Password",type:"password",isValid:C,value:E.value,onChange:function(e){p({type:"USER_INPUT",val:e.target.value})},onBlur:function(){p({type:"INPUT_BLUR"})}}),c.a.createElement("div",{className:m.a.actions},c.a.createElement(f,{type:"submit",className:m.a.btn,disabled:!l},"Login"))))},C=t(26),L=t.n(C),V=function(e){return c.a.createElement("div",{className:L.a.background},c.a.createElement("img",{src:e.src,alt:e.alt,className:"".concat(L.a["background-img"]," ").concat(e.className)}))},S=function(e){return e.children},h=t(23),x=t.n(h),U=function(){return c.a.createElement(S,null,c.a.createElement("div",{className:x.a.header},c.a.createElement("h1",{id:"title",className:"".concat(x.a.title," ").concat(x.a["title-top"])},"Guests")))},w=t(24),k=t.n(w),P=t(34),R=t(13),A=Object(P.a)({apiKey:"AIzaSyAwMYLr2FPaIB6Y9tF2Zr3WbAeKyFuXlJE",authDomain:"my-garage-bf68b.firebaseapp.com",databaseURL:"https://my-garage-bf68b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"my-garage-bf68b",storageBucket:"my-garage-bf68b.appspot.com",messagingSenderId:"679999887316",appId:"1:679999887316:web:2c36772d69f106ecb76841"}),F=Object(R.a)(A),T=t(20),B=function(e){var a=Object(n.useState)(""),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useState)(),u=Object(i.a)(s,2),d=u[0],m=u[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),g=b[0],E=b[1];return c.a.createElement(S,null,c.a.createElement(o,{className:k.a.registration},c.a.createElement(N,{id:"email",label:"Email",type:"text",value:l,isValid:d,onChange:function(e){r(e.target.value),e.target.value.includes("@")?(m(!0),E(!0)):(m(!1),E(!1))}}),c.a.createElement("div",{className:k.a.actions},c.a.createElement(f,{type:"submit",onClick:function(){var a=Object(T.a)();Object(R.d)(Object(R.c)(F,"users/"+a),{userId:a,email:l,cars:[]}),r(""),e.onFill()},className:k.a.btn,disabled:!g},"Register"))))},M=t(27),D=t.n(M),J=t(35),Y=t.n(J),K=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useContext)(_);return c.a.createElement(c.a.Fragment,null,c.a.createElement(V,{src:Y.a,alt:"Formula",className:D.a["background-img"]}),c.a.createElement(o,{className:D.a.home},s.isLogin&&c.a.createElement(y,null),l&&!s.isLogin&&c.a.createElement(U,null),!l&&!s.isLogin&&c.a.createElement(B,{onFill:function(){r(!0)}})))},X=t(36),Z=t.n(X),G=function(e){var a=e.cars.filter(function(a){return a.carId===e.loadCarId}),t=a.map(function(e){return c.a.createElement("div",{key:e.carId,className:Z.a["car-info-list"]},c.a.createElement("ul",null,c.a.createElement("li",null,"brand:",c.a.createElement("p",null,e.brand)),c.a.createElement("li",null,"series:",c.a.createElement("p",null,e.series)),c.a.createElement("li",null,"model:",c.a.createElement("p",null,e.model)),c.a.createElement("li",null,"year:",c.a.createElement("p",null,e.year)),c.a.createElement("li",null,"engine:",c.a.createElement("p",null,e.engine)),c.a.createElement("li",null,"mileage:",c.a.createElement("p",null,e.mileage))))});return c.a.createElement(S,null,t)},H=t(12),q=t.n(H),z=function(e,a){return"FILL_INPUT"===a.type?{value:a.val,isValid:""!==a.val}:{value:"",isValid:!1}},W=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useRef)(null),u=Object(n.useReducer)(z,{value:"",isValid:null}),o=Object(i.a)(u,2),d=o[0],m=o[1],v=Object(n.useReducer)(z,{value:"",isValid:null}),b=Object(i.a)(v,2),g=b[0],E=b[1],_=Object(n.useReducer)(z,{value:"",isValid:null}),p=Object(i.a)(_,2),j=p[0],O=p[1];Object(n.useEffect)(function(){r(d.isValid&&g.isValid&&j.isValid)},[d,g,j]);return c.a.createElement("div",{className:q.a["new-service"]},c.a.createElement("div",{className:q.a["service-form"]},c.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),l){var t=0===s.current.value.trim()?"---":s.current.value,n=g.value.split("-"),c=Object(i.a)(n,3),r=c[0],u=c[1],o=c[2],m="".concat(o,"-").concat(u,"-").concat(r),v=Object(T.a)();Object(R.d)(Object(R.c)(F,"users/".concat(e.userId,"/cars/").concat(e.carId,"/services/").concat(v)),{serviceId:v,service:d.value,mileage:j.value,date:m,info:t}),e.carNewService()}}},c.a.createElement(N,{id:"service",label:"Service",type:"text",isValid:d.isValid,value:d.value,onChange:function(e){m({type:"FILL_INPUT",val:e.target.value})},className:"".concat(q.a.control," ").concat(q.a["service-name"])}),c.a.createElement("div",{className:q.a["service-date-box"]},c.a.createElement(N,{id:"date",label:"Date",type:"date",isValid:g.isValid,value:g.value,onChange:function(e){E({type:"FILL_INPUT",val:e.target.value})},className:"".concat(q.a.control," ").concat(q.a["service-date"])}),c.a.createElement(N,{id:"mileage",label:"Mileage",type:"number",isValid:j.isValid,value:j.value,onChange:function(e){O({type:"FILL_INPUT",val:e.target.value})},className:"".concat(q.a.control," ").concat(q.a["service-mileage"])})),c.a.createElement("div",{className:q.a.control},c.a.createElement(N,{id:"info",label:"Info",type:"text",ref:s,className:"".concat(q.a.control," ").concat(q.a["service-mileage"])})),c.a.createElement("div",{className:q.a.actions},c.a.createElement(f,{type:"submit",className:q.a.btn},"Add Service")))))},Q=t(21),$=t.n(Q),ee=function(e){var a=Object(n.useState)(),t=Object(i.a)(a,2),l=t[0],r=t[1],s=[],u=e.cars.filter(function(a){return a.carId===e.carId}).reduce(function(e,a){if("none"!==a.services)return a.services},{});for(var o in u)s.push({id:o,service:u[o].service,mileage:u[o].mileage,date:u[o].date,info:u[o].info});var d=s.map(function(e,a){return c.a.createElement("div",{key:a,className:$.a["car-services-list"]},c.a.createElement("ul",null,c.a.createElement("li",null,"service: ",c.a.createElement("p",null,e.service)),c.a.createElement("li",null,"date: ",c.a.createElement("p",null,e.date)),c.a.createElement("li",null,"mileage: ",c.a.createElement("p",null,e.mileage," km")),c.a.createElement("li",null,"info: ",c.a.createElement("p",null,e.info))))});return c.a.createElement("div",{className:$.a["car-services"]},c.a.createElement("div",{className:$.a["car-services-box"]},d),l&&c.a.createElement(W,{carNewService:function(e){r(!1)},carId:e.carId,userId:e.userId}),!l&&c.a.createElement(f,{className:$.a["button-add"],onClick:function(){r(!0)}},"Add New Service"))},ae=t(28),te=t.n(ae),ne=t(10),ce=t.n(ne),le=function(e,a){return"FILL_INPUT"===a.type?{value:a.val,isValid:""!==a.val}:{value:"",isValid:!1}},re=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useReducer)(le,{value:"",isValid:null}),u=Object(i.a)(s,2),o=u[0],d=u[1],m=Object(n.useReducer)(le,{value:"",isValid:null}),v=Object(i.a)(m,2),b=v[0],g=v[1],E=Object(n.useReducer)(le,{value:"",isValid:null}),_=Object(i.a)(E,2),p=_[0],j=_[1],O=Object(n.useReducer)(le,{value:"",isValid:null}),I=Object(i.a)(O,2),y=I[0],C=I[1],L=Object(n.useReducer)(le,{value:"",isValid:null}),V=Object(i.a)(L,2),S=V[0],h=V[1],x=Object(n.useReducer)(le,{value:"",isValid:null}),U=Object(i.a)(x,2),w=U[0],k=U[1];Object(n.useEffect)(function(){r(o.isValid&&y.isValid&&p.isValid)},[o,y,p]);return c.a.createElement("div",{className:ce.a["add-car"]},c.a.createElement("form",{className:ce.a["add-car-form"],onSubmit:function(a){a.preventDefault();var t={brand:o.value,series:b.value,model:w.value,year:y.value,engine:S.value,mileage:p.value};e.onAdd(t),e.onClose()}},c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"brand",label:"Brand",type:"text",isValid:o.isValid,value:o.value,onChange:function(e){d({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["add-car-brand"])})),c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"series",label:"Series",type:"text",isValid:b.isValid,value:b.value,onChange:function(e){g({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["add-car-series"])})),c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"model",label:"Model",type:"text",isValid:w.isValid,value:w.value,onChange:function(e){k({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["add-car-model"])})),c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"year",label:"Year",type:"number",isValid:y.isValid,value:y.value,onChange:function(e){C({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["add-car-year"])})),c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"engine",label:"Engine",type:"text",isValid:S.isValid,value:S.value,onChange:function(e){h({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["add-car-engine"])})),c.a.createElement("div",{className:ce.a.control},c.a.createElement(N,{id:"mileage",label:"Mileage",type:"number",isValid:p.isValid,value:p.value,onChange:function(e){j({type:"FILL_INPUT",val:e.target.value})},className:"".concat(ce.a.input," ").concat(ce.a["service-mileage"])})),c.a.createElement("div",{className:"".concat(ce.a.actions," ").concat(ce.a["add-button"])},c.a.createElement(f,{type:"submit",disabled:!l,className:ce.a.btn},"Add Car"))))},ie=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useState)("7c3efb69fd9"),u=Object(i.a)(s,2),o=u[0],d=u[1],m=function(e){d(e.target.dataset.id),r(!1)},v=e.cars.map(function(e){return c.a.createElement("li",{key:e.carId},c.a.createElement("button",{onClick:m,"data-id":e.carId},e.brand," ",e.series))});return c.a.createElement(S,null,c.a.createElement("div",{className:te.a["cars-list"]},c.a.createElement("ul",null,v,c.a.createElement("li",null,c.a.createElement("button",{onClick:function(){r(!0)}},"Add Car")))),c.a.createElement("div",{className:te.a["car-info"]},!l&&c.a.createElement(G,{cars:e.cars,loadCarId:o,userId:e.userId}),!l&&c.a.createElement(ee,{cars:e.cars,carId:o,userId:e.userId}),l&&c.a.createElement(re,{onAdd:function(a){var t=Object(T.a)();Object(R.d)(Object(R.c)(F,"/users/".concat(e.userId,"/cars/").concat(t)),{carId:t,brand:a.brand,model:a.model,series:a.series,year:a.year,engine:a.engine,mileage:a.mileage,services:[]})},onClose:function(){r(!1)}})))},se=t(37),ue=t.n(se),oe=t(38),de=t.n(oe),me=function(e){var a=Object(n.useState)(),t=Object(i.a)(a,2),l=t[0],r=t[1],s=Object(n.useState)(),u=Object(i.a)(s,2),d=u[0],m=u[1],v=Object(n.useState)(!0),b=Object(i.a)(v,2),f=b[0],g=b[1],E=Object(n.useState)(!1),_=Object(i.a)(E,2),p=_[0];_[1];if(Object(n.useEffect)(function(){Object(R.b)(Object(R.c)(F,"users"),function(e){var a=e.val();if(null!==a){var t=Object.values(a).find(function(e,a){return"test@test.bg"===a.email&&(e=a),e});r(t.userId),m(t.cars)}}),g(!1)},[]),f)return c.a.createElement(o,null,c.a.createElement("p",null,"Loading..."));if(p)return c.a.createElement(o,null,c.a.createElement("p",null,p));var j=[];for(var N in d)j.push({carId:N,brand:d[N].brand,series:d[N].series,model:d[N].model,year:d[N].year,mileage:d[N].mileage,engine:d[N].engine,services:d[N].services});return c.a.createElement(S,null,c.a.createElement(V,{src:de.a,alt:"Awesome garage"}),c.a.createElement(o,{className:ue.a.garage},c.a.createElement(ie,{cars:j,userId:l})))},ve=t(39),be=t.n(ve),fe=function(e){var a=Object(n.useContext)(_);return c.a.createElement("nav",{className:be.a.nav},a.isLoggedIn&&c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"/"},"Cars")),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},"Settings")),c.a.createElement("li",null,c.a.createElement("button",{onClick:a.onLogout},"Logout"))),!a.isLoggedIn&&c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"/"},"Register")),c.a.createElement("li",null,c.a.createElement("button",{onClick:a.loginBtn},"Login"))))},ge=t(40),Ee=t.n(ge),_e=function(e){return c.a.createElement("header",{className:Ee.a.header},c.a.createElement("h1",null,"My Garage"),c.a.createElement(fe,{showLogin:e.getLogin}))},pe=c.a.createContext({cars:[],addCar:function(){},updateCar:function(){},removeCar:function(){}}),je={cars:[]},Ne=function(e,a){return"ADD"===a.type?{cars:e.cars.concat(a.car)}:je},Oe=function(e){var a=Object(n.useReducer)(Ne,je),t=Object(i.a)(a,2),l=t[0],r=t[1],s={cars:l.cars,addAllCars:function(e){},addCar:function(e){console.log(e),r({type:"ADD",car:e})},updateCar:function(e){},removeCar:function(e){}};return c.a.createElement(pe.Provider,{value:s},e.children)};var Ie=function(e){var a=Object(n.useContext)(_);return c.a.createElement(Oe,null,c.a.createElement(_e,null),c.a.createElement("main",null,!a.isLoggedIn&&c.a.createElement(K,null),a.isLoggedIn&&c.a.createElement(me,null)))};r.a.render(c.a.createElement(E,null,c.a.createElement(Ie,null)),document.getElementById("root"))}],[[42,2,1]]]);
//# sourceMappingURL=main.da1cb032.chunk.js.map